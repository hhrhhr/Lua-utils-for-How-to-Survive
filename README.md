Lua-utils-for-How-to-Survive
============================

дополнительное ПО
-----------------

* Lua 5.2 (http://www.lua.org)
* BMFont **1.14 beta** (http://www.angelcode.com/products/bmfont/)

использование (быстрое)
-----------------------

* скачать готовый архив с Lua (http://sourceforge.net/projects/luabinaries/files/latest/download)
* распаковать в корень (минимум `lua52.exe` и `lua52.dll`)
* выполнить команду

        lua52 step_1_1_lang_decompose.lua work
* скопировать в каталог `work` готовый перевод (файл `text_new.txt` в кодировке *CP-1251*)
* выполнить последовательно

        lua52 step_2_1_font_compose.lua work
        lua52 step_2_2_text_convert.lua work
        lua52 step_2_3_lang_compose.lua work
* забрать готовый языковой файл `work\Common_PC.rus`
* переименовать расширение на нужное, скопировать в игру


использование (расширенное)
---------------------------

* разбор файла локализации

  `lua step_1_1_lang_decompose.lua путь-к-Common_PC.eng [рабочий-каталог]`

  `рабочий-каталог` должен быть заранее создан, без его указания - текущий каталог

* декодирование текста

  `lua step_1_2_text_extract.lua [рабочий-каталог] [noconvert]`

  `рабочий-каталог` — каталог полученный на предыдущем шаге

  `noconvert` — при указании этой опции не используется таблица подстановки символов

* вытаскивание шрифтов

  `lua step_1_3_font_decompose.lua [рабочий-каталог]`

  создаются пары файлов `font_orig_(?).(bmp|txt)` с игровыми шрифтами

* создание новых шрифтов

  `lua step_2_1_font_compose.lua [рабочий-каталог]`

  необходимы пары файлов `fonts/font_new_(?).(bmp|fnt)` полученные утилитой *BMFont* (готовый пример и конфиги есть в каталоге `fonts`)

* генерация текстовых ресурсов

  `lua step_2_2_text_convert.lua [рабочий-каталог]`
  
  необходим файл `[рабочий-каталог]/text_new.txt` с переводом. для русского языка обязательна кодировка *CP-1251*
  
* окончательная сборка

  `lua step_2_3_lang_compose.lua [рабочий-каталог]`
  
  на выходе будет файл `[рабочий-каталог]/Common_PC.rus` с внедренными шрифтами и переводом
